let style=document.createElement("style"),modalHTML=(style.textContent=`
  .mailchimp-modal {
    display: flex;
    position: fixed;
    z-index: 999;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.5s ease, visibility 0.5s ease;
  }
  .mailchimp-modal.active {
    opacity: 1;
    visibility: visible;
  }
  .mailchimp-modal-content {
    background-color: #0d0d0d;
    border-radius: 12px;
    width: 90%;
    min-height: 420px;
    max-width: 900px;
    display: flex;
    position: relative;
    opacity: 0;
    transition: opacity 0.5s ease;
    box-shadow: 0 0 20px 4px rgba(240, 240, 240, 0.2);
    overflow: hidden;
  }
  .mailchimp-modal.active .mailchimp-modal-content {
    opacity: 1;
  }
  .mailchimp-left-column {
    flex: 1;
    padding: 40px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    position: relative;
    padding-bottom: 48px;
  }
  .mailchimp-right-column {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #1a1a1a;
  }
  .mailchimp-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .mailchimp-close {
    color: #000;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
    position: absolute;
    top: 10px;
    right: 15px;
    transition: color 0.2s ease;
    z-index: 1;
    background-color: rgba(255, 255, 255, 0.81);
    border-radius: 100%;
    height: 28px;
    width: 28px;
    -webkit-backdrop-filter: blur(100px);
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .mailchimp-close:hover,
  .mailchimp-close:focus {
    color: #4a4a4c;
  }
  .mailchimp-form {
    display: flex;
    align-items: center;
    background-color: #3a3a3c;
    border-radius: 12px;
    overflow: hidden;
    transition: background-color 0.2s ease;
    height: 56px;
    margin-top: 20px;
  }
  .mailchimp-form:hover {
    background-color: #4a4a4c;
  }
  .mailchimp-form.focused {
    box-shadow: inset 0 0 0 2px #bcbcbc;
  }
  .mailchimp-icon {
    padding: 16px 0 16px 20px;
  }
  .mailchimp-icon img {
    width: 24px;
    height: 24px;
    filter: brightness(0) saturate(100%) invert(100%);
  }
  .mailchimp-input {
    flex-grow: 1;
    background: none;
    border: none;
    color: #ffffff;
    padding: 16px 12px;
    font-size: 16px;
    font-family: 'Montserrat', sans-serif;
    outline: none;
  }
  .mailchimp-input::placeholder {
    color: rgba(255, 255, 255, 0.7);
  }
  .mailchimp-button {
    background: none;
    border: none;
    color: #ffffff;
    font-size: 20px;
    padding: 16px;
    cursor: pointer;
    opacity: 0.7;
    transition: opacity 0.5s ease;
  }
  .mailchimp-button:hover {
    opacity: 1;
  }
  .subscription-message {
    display: none;
    color: #ffffff;
    text-align: center;
    margin-top: 20px;
    font-family: 'Montserrat', sans-serif;
    font-size: 16px;
  }

  .mailchimp-never-show {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    color: #6a6868;
    font-family: 'Montserrat', sans-serif;
    font-size: 12px;
    cursor: pointer;
    text-decoration: none;
  }
  .mailchimp-never-show:hover {
    text-decoration: underline;
  }

  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus,
  textarea:-webkit-autofill,
  textarea:-webkit-autofill:hover,
  textarea:-webkit-autofill:focus,
  select:-webkit-autofill,
  select:-webkit-autofill:hover,
  select:-webkit-autofill:focus {
    -webkit-background-clip: text;
    -webkit-text-fill-color: #ffffff;
    transition: background-color 5000s ease-in-out 0s;
  }
  
  @media (max-width: 768px) {
    .mailchimp-modal {
      align-items: flex-end;
      justify-content: center;
      height: auto;
      bottom: -100%;
      transition: opacity 0.5s ease, visibility 0.5s ease, bottom 0.5s ease;
    }
    .mailchimp-modal.active {
      bottom: 0;
    }
    .mailchimp-modal-content {
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
      border-bottom-left-radius: 0px;
      border-bottom-right-radius: 0px;
      width: 100%;
      max-width: none;
      min-height: auto;
      padding: 20px;
    }
    .mailchimp-right-column {
      display: none;
    }
    .mailchimp-left-column {
      width: 100%;
      padding: 0px;
      padding-bottom: 48px;
    }
    .mailchimp-input {
      width: 100%;
    }
  }
`,document.head.appendChild(style),`
  <div id="mailchimpModal" class="mailchimp-modal">
    <div class="mailchimp-modal-content">
      <span class="mailchimp-close">&times;</span>
      <div class="mailchimp-left-column">
        <h2 style="color: #ffffff; font-family: 'Montserrat', sans-serif;">Access insider-only deals & event updates</h2>
        <form id="mailchimpForm" action="https://whisperingvinewine.us22.list-manage.com/subscribe/post?u=841ac5f1d95f2aff901de9613&amp;id=bea241e703" method="POST" class="mailchimp-form">
          <input type="hidden" name="u" value="841ac5f1d95f2aff901de9613">
          <input type="hidden" name="id" value="bea241e703">
          <div class="mailchimp-icon">
            <img src="https://mail.wvwine.co/img/email.svg" alt="Email icon">
          </div>
          <input type="email" name="MERGE0" placeholder="Sign up for exclusive deals!" aria-label="Newsletter Email" required class="mailchimp-input" autocomplete="email">
          <button type="submit" class="mailchimp-button">â†’</button>
        </form>
        <div class="subscription-message">Thanks for Subscribing!</div>
        <a href="#" class="mailchimp-never-show">Never show this again</a>
      </div>
      <div class="mailchimp-right-column">
        <img src="https://mail.wvwine.co/img/wine_bottles.jpg" alt="Artistic image" class="mailchimp-image">
      </div>
    </div>
  </div>
`),modal=(document.body.insertAdjacentHTML("beforeend",modalHTML),document.getElementById("mailchimpModal")),closeBtn=document.getElementsByClassName("mailchimp-close")[0],form=document.getElementById("mailchimpForm"),input=form.querySelector('input[type="email"]'),message=document.querySelector(".subscription-message"),neverShowLink=document.querySelector(".mailchimp-never-show");function setCookie(e,i,t){let o="";var a;t&&((a=new Date).setTime(a.getTime()+24*t*60*60*1e3),o="; expires="+a.toUTCString()),document.cookie=e+"="+(i||"")+o+"; path=/"}function getCookie(e){var t=e+"=",o=document.cookie.split(";");for(let i=0;i<o.length;i++){let e=o[i];for(;" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(t))return e.substring(t.length,e.length)}return null}function showModal(){modal.classList.add("active")}function hideModal(){modal.classList.remove("active")}closeBtn.onclick=hideModal,window.onclick=function(e){e.target==modal&&hideModal()},neverShowLink.addEventListener("click",function(e){e.preventDefault(),setCookie("mailchimp_never_show","true",365),hideModal()}),form.addEventListener("submit",function(e){e.preventDefault();e=(form.querySelector('input[name="MERGE0"], input[name="EMAIL"]')?.value||"").trim();if(e){let i=new FormData;i.append("u","841ac5f1d95f2aff901de9613"),i.append("id","bea241e703"),i.append("MERGE0",e),i.append("EMAIL",e),["1","2","4","8","16"].forEach(e=>i.append(`group[256][${e}]`,"1"));e=form.querySelector('input[name^="b_"]');e&&i.append(e.name,e.value||""),fetch("https://whisperingvinewine.us22.list-manage.com/subscribe/post",{method:"POST",mode:"no-cors",body:i}).then(()=>{form.style.display="none",message.style.display="block",setTimeout(()=>{message.style.display="none",setTimeout(()=>{form.style.display="flex",form.reset()},300),hideModal()},2e3),setCookie("mailchimp_subscribed","true",365)}).catch(e=>{console.error("Error:",e),alert("There was an error. Please try again later.")})}}),window.addEventListener("resize",()=>{input.placeholder=window.innerWidth<=377?"Sign up":"Sign up for exclusive deals!"}),window.onload=function(){if(input.placeholder=window.innerWidth<=377?"Sign up":"Sign up for exclusive deals!",!getCookie("mailchimp_never_show")){let i=getCookie("mailchimp_last_shown");var e=getCookie("mailchimp_modal_closed");if(e){var t=new Date((new Date).getTime()-5184e5);if(new Date(e)>t)return}setTimeout(function(){var e;i&&(e=new Date((new Date).getTime()-432e6),!(new Date(i)<e)||getCookie("mailchimp_subscribed"))||(showModal(),setCookie("mailchimp_last_shown",(new Date).toUTCString(),5))},150)}},input.addEventListener("focus",function(){this.placeholder="Enter your email",form.classList.add("focused")}),input.addEventListener("blur",function(){this.placeholder=window.innerWidth<=377?"Sign up":"Sign up for exclusive deals!",form.classList.remove("focused")});